<UserControl x:Class="Fingerprint.AdminUI.Views.EnrollUserView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Text="Enroll New User" 
                 Style="{StaticResource TitleStyle}"
                 Grid.Row="0"
                 Margin="0,0,0,20"/>

        <!-- Content -->
        <materialDesign:Card Grid.Row="1" Padding="30">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Enrollment Form -->
                <StackPanel Grid.Row="0" MaxWidth="500">
                    <TextBlock Text="Employee Information" 
                             Style="{StaticResource SubtitleStyle}"/>

                    <!-- Employee ID (Auto-generated, Read-only) -->
                    <TextBox materialDesign:HintAssist.Hint="Employee ID (Auto-generated)"
                           Text="{Binding EmployeeId, UpdateSourceTrigger=PropertyChanged}"
                           Style="{StaticResource MaterialDesignFilledTextBox}"
                           Margin="0,10,0,0"
                           FontSize="14"
                           IsReadOnly="True"
                           Background="#F5F5F5"
                           ToolTip="Employee ID is automatically generated"/>

                    <!-- First Name -->
                    <TextBox materialDesign:HintAssist.Hint="First Name *"
                           Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}"
                           Style="{StaticResource MaterialDesignFilledTextBox}"
                           Margin="0,10,0,0"
                           FontSize="14"/>

                    <!-- Last Name -->
                    <TextBox materialDesign:HintAssist.Hint="Last Name *"
                           Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}"
                           Style="{StaticResource MaterialDesignFilledTextBox}"
                           Margin="0,10,0,0"
                           FontSize="14"/>

                    <!-- Department -->
                    <TextBox materialDesign:HintAssist.Hint="Department (Optional)"
                           Text="{Binding Department, UpdateSourceTrigger=PropertyChanged}"
                           Style="{StaticResource MaterialDesignFilledTextBox}"
                           Margin="0,10,0,0"
                           FontSize="14"/>

                    <!-- Required Fields Note -->
                    <TextBlock Text="* Required fields" 
                             FontSize="11"
                             Opacity="0.6"
                             Margin="0,10,0,0"/>
                </StackPanel>

                <!-- Enrollment Button and Status -->
                <StackPanel Grid.Row="1" Margin="0,30,0,0" MaxWidth="500">
                    <!-- Enrollment Button -->
                    <Button Command="{Binding StartEnrollmentCommand}"
                          Style="{StaticResource MaterialDesignRaisedButton}"
                          Height="50"
                          FontSize="16">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Fingerprint" 
                                                       Width="24" Height="24" 
                                                       VerticalAlignment="Center" 
                                                       Margin="0,0,10,0"/>
                                <TextBlock Text="Start Fingerprint Enrollment" 
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>

                    <!-- Clear Form Button -->
                    <Button Command="{Binding ClearFormCommand}"
                          Content="Clear Form"
                          Style="{StaticResource MaterialDesignFlatButton}"
                          Margin="0,10,0,0"/>
                </StackPanel>

                <!-- Status Area -->
                <materialDesign:Card Grid.Row="2" 
                                   Margin="0,30,0,0"
                                   Padding="20"
                                   Background="{DynamicResource MaterialDesignDivider}">
                    <StackPanel>
                        <!-- Loading Indicator -->
                        <ProgressBar IsIndeterminate="True"
                                   Height="4"
                                   Visibility="{Binding IsEnrolling, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                        <!-- Status Message -->
                        <TextBlock Text="{Binding EnrollmentStatus}"
                                 FontSize="14"
                                 FontWeight="SemiBold"
                                 HorizontalAlignment="Center"
                                 Margin="0,10,0,0">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding EnrollmentSuccess}" Value="True">
                                            <Setter Property="Foreground" Value="Green"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding ErrorMessage, Converter={StaticResource StringToBoolConverter}}" Value="True">
                                            <Setter Property="Foreground" Value="Red"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <!-- Error Message -->
                        <TextBlock Text="{Binding ErrorMessage}"
                                 Foreground="Red"
                                 Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"
                                 TextWrapping="Wrap"
                                 HorizontalAlignment="Center"
                                 Margin="0,10,0,0"/>

                        <!-- Instructions (when not enrolling) -->
                        <StackPanel Visibility="{Binding IsEnrolling, Converter={StaticResource InverseBooleanToVisibilityConverter}}"
                                  Margin="0,20,0,0">
                            <TextBlock Text="Enrollment Instructions:" 
                                     FontWeight="SemiBold"
                                     Margin="0,0,0,10"/>
                            <TextBlock Text="1. Fill in all required employee information" TextWrapping="Wrap"/>
                            <TextBlock Text="2. Click 'Start Fingerprint Enrollment'" TextWrapping="Wrap"/>
                            <TextBlock Text="3. Place finger on the scanner when prompted" TextWrapping="Wrap"/>
                            <TextBlock Text="4. Keep finger steady during scanning" TextWrapping="Wrap"/>
                            <TextBlock Text="5. Wait for confirmation message" TextWrapping="Wrap"/>
                        </StackPanel>
                    </StackPanel>
                </materialDesign:Card>
            </Grid>
        </materialDesign:Card>
    </Grid>
</UserControl>
